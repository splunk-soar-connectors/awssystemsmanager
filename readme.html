<!-- File: readme.html
  Copyright (c) 2019-2022 Splunk Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
either express or implied. See the License for the specific language governing permissions
and limitations under the License.
-->

<h2>Authorization</h2>
Upon installing AWS Systems Manager and configuring your asset, you will want to make sure your AWS account (preferably with Administrator privileges) has the following permissions:<br></br>

<ul>
  <li>The AmazonSSMFullAccess policy is attached directly to the account</li>
  <li>Ability to read and write to S3 buckets</li>
</ul>

If it is preferred to use a role and Phantom is running as an EC2 instance, the <b>use_role</b> checkbox can be checked instead.  This will allow the role that is attached to the instance to be used.  Please see the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">AWS EC2 and IAM documentation</a> for more information.
<br></br>
By default, AWS Systems Manager does not have permission to perform actions on your instances. You must make sure to attach the AmazonEC2RoleforSSM IAM policy to the instance that you want to manage with SSM.

For more information on setting up your account and instances with SSM privileges, visit the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/tutorial_run_command.html">AWS tutorial</a>.

<h2>Assumed Role Credentials</h2>
The optional <b>credentials</b> action parameter consists of temporary <b>assumed role</b> credentials that will be used to perform the action instead of those that are configured in the <b>asset</b>. The parameter is not designed to be configured manually but should instead be used in conjunction with the Phantom AWS Security Token Service app. The output of the <b>assume_role</b> action of the STS app with data path <b>assume_role_&lt;number&gt;:action_result.data.*.Credentials</b> consists of a dictionary containing the <b>AccessKeyId</b>, <b>SecretAccessKey</b>, <b>SessionToken</b> and <b>Expiration</b> key/value pairs. This dictionary can be passed directly into the credentials parameter in any of the following actions within a playbook. For more information, please see the <a href=https://docs.aws.amazon.com/iam/index.html>AWS Identity and Access Management documentation</a>.


<h2> Playbook Backward Compatibility</h2>
<ul>
  <li> A new asset configuration parameter has been added in v2.0 of the app. Hence, it is requested to the end-user to update their existing assets and playbooks accordingly.</li>
    <ul>
      <li> Default S3 Bucket Name: This parameter defines the default AWS S3 bucket to be used for writing the output of the <b>get file</b> and the <b>execute program</b> actions. For performance optimality, the <b>test connectivity</b> action does not validate this parameter.</li>
    <ul>
</ul>

